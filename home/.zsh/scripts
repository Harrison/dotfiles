# find shorthand
f() {
    find . -name "$1"
}

# Start an HTTP server from a directory, optionally specifying the port
server() {
    local port="${1:-8000}"
    open "http://localhost:${port}/"
    python3 -m http.server $port
}

chrome() {
    /Applications/Google\ Chrome\ Canary.app/Contents/MacOS/Google\ Chrome\ Canary \
        --js-flags="--trace-opt --trace-deopt --trace-bailout" \
        --allow-file-access \
        --disable-web-security \
        --remote-debugging-port=9222 \
        --js-flags=--harmony
}

rebase-master() {
    git fetch origin
    git rebase --interactive --autostash --autosquash origin/master
}

rebase-continue() {
    git add --all
    git commit --no-edit
    git rebase --continue
}

# Find processes running on port
open-port() {
  lsof -Pn -i4 | grep $1
}

cop-changed() {
  git ls-files -m | xargs ls -1 2>/dev/null | grep '\.rb$' | xargs rubocop
}

cop-master() {
  git diff-tree -r --no-commit-id --name-only head origin/master | grep '\.rb$' | xargs rubocop
}

cop-upstream() {
  git diff-tree -r --no-commit-id --name-only @\{u\} head | grep '\.rb$' | xargs rubocop
}

rspec-changed() {
  git ls-files -m | xargs ls -1 2>/dev/null | grep '\_spec\.rb$' | xargs rspec
}

rspec-master() {
  git diff-tree -r --no-commit-id --name-only head origin/master | grep '\_spec\.rb$' | xargs rspec
}

rspec-upstream() {
  git diff-tree -r --no-commit-id --name-only @\{u\} head | grep '\_spec\.rb$' | xargs rspec
}
